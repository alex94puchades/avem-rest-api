{"version":3,"sources":["app/models/Session.js"],"names":[],"mappings":";;;;;;;;qBAAkB,OAAO;;;;wBACM,UAAU;;;;sBAEtB,iBAAiB;;;;2BACZ,eAAe;;;;4BACd,gBAAgB;;;;AAEzC,IAAM,aAAa,GAAG,cANJ,MAAM,CAMS;AAChC,KAAI,EAAE;AACL,MAAI,EAAE,UARU,MAAM,CAQT,QAAQ;AACrB,KAAG,EAAE,MAAM;AACX,UAAQ,EAAE,IAAI;EACd;AACD,YAAW,EAAE;AACZ,MAAI,EAAE,UAbU,MAAM,CAaT,QAAQ;AACrB,KAAG,EAAE,QAAQ;AACb,UAAQ,EAAE,IAAI;EACd;AACD,cAAa,EAAE;AACd,MAAI,EAAE,MAAM;AACZ,UAAQ,EAAE,IAAI;EACd;AACD,WAAU,EAAE;AACX,MAAI,EAAE,MAAM;AACZ,UAAQ,EAAE,IAAI;AACd,aAAS,CAAC;EACV;CACD,CAAC,CAAC;;AAEH,aAAa,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAS,IAAI,EAAE;;;AAC1C,oBAAM,QAAQ,CAAC,CACd,UAAA,IAAI;SAAI,yBAAY,MAAM,CAAC,EAAE,OAAO,EAAE,MAAK,GAAG,EAAE,EAAE,IAAI,CAAC;EAAA,EACvD,UAAA,IAAI;SAAI,0BAAa,MAAM,CAAC,EAAE,OAAO,EAAE,MAAK,GAAG,EAAE,EAAE,IAAI,CAAC;EAAA,CACxD,EAAE,IAAI,CAAC,CAAC;CACT,CAAC,CAAC;;qBAEY,sBAAS,KAAK,CAAC,SAAS,EAAE,aAAa,CAAC","file":"app/models/Session.js","sourcesContent":["import async from 'async';\nimport mongoose, {Schema} from 'mongoose';\n\nimport config from '../../../config';\nimport AccessToken from './AccessToken';\nimport RefreshToken from './RefreshToken';\n\nconst sessionSchema = new Schema({\n\tuser: {\n\t\ttype: Schema.ObjectId,\n\t\tref: 'User',\n\t\trequired: true,\n\t},\n\townerClient: {\n\t\ttype: Schema.ObjectId,\n\t\tref: 'Client',\n\t\trequired: true,\n\t},\n\ttokenDuration: {\n\t\ttype: Number,\n\t\trequired: true,\n\t},\n\treferences: {\n\t\ttype: Number,\n\t\trequired: true,\n\t\tdefault: 0,\n\t},\n});\n\nsessionSchema.pre('remove', function(next) {\n\tasync.parallel([\n\t\tnext => AccessToken.remove({ session: this._id }, next),\n\t\tnext => RefreshToken.remove({ session: this._id }, next),\n\t], next);\n});\n\nexport default mongoose.model('Session', sessionSchema);\n"],"sourceRoot":"/source/"}