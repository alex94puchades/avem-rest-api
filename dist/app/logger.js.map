{"version":3,"sources":["app/logger.js"],"names":[],"mappings":";;;;;QAqBgB,UAAU,GAAV,UAAU;QAOV,SAAS,GAAT,SAAS;;;;sBA5BN,QAAQ;;;;sBAER,cAAc;;;;AAEjC,IAAM,MAAM,GAAG,yBAAO;AACrB,IAAG,EAAE,IAAI;AACT,KAAI,EAAE,eAAe;AACrB,QAAO,EAAE,CACR;AACC,OAAK,EAAE,MAAM;AACb,QAAM,EAAE,OAAO,CAAC,MAAM;EACtB,EAAE;AACF,OAAK,EAAE,OAAO;AACd,MAAI,EAAE,oBAAO,OAAO,CAAC,UAAU;EAC/B,CACD;AACD,YAAW,EAAE,oBAAO,cAAc;CAClC,CAAC,CAAC;;qBAEY,MAAM;;AAEd,SAAS,UAAU,GAAG;AAC5B,QAAO,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAK;AAC1B,QAAM,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAC1B,MAAI,EAAE,CAAC;EACP,CAAC;CACF;;AAEM,SAAS,SAAS,GAAG;AAC3B,QAAO,UAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAK;AAC/B,QAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClB,MAAI,CAAC,GAAG,CAAC,CAAC;EACV,CAAC;CACF","file":"app/logger.js","sourcesContent":["import bunyan from 'bunyan';\n\nimport config from '../../config';\n\nconst logger = bunyan({\n\tsrc: true,\n\tname: 'avem-rest-api',\n\tstreams: [\n\t\t{\n\t\t\tlevel: 'info',\n\t\t\tstream: process.stdout,\n\t\t}, {\n\t\t\tlevel: 'error',\n\t\t\tpath: config.logging.outputPath,\n\t\t}\n\t],\n\tserializers: bunyan.stdSerializers,\n});\n\nexport default logger;\n\nexport function logRequest() {\n\treturn (req, res, next) => {\n\t\tlogger.info({ req: req });\n\t\tnext();\n\t};\n}\n\nexport function logErrors() {\n\treturn (err, req, res, next) => {\n\t\tlogger.error(err);\n\t\tnext(err);\n\t};\n}\n"],"sourceRoot":"/source/"}